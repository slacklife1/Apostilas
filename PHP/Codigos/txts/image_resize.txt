            File Information

            Verifying link...

            Register Your DAP

Please visit our sponsor
    //**************************************
    // Name: Image Resize (Aspect Ratio, Actual Resize)
    // Description:I've search the PHP codes, found two folks who have published resize code. Problem with one , is that it only gives you the new size but you set it in the HTML's IMG tag, which is dumb in my opinion because you still are downloading the entire image. Another submision did the same, except you could use a width, but they did a loop decreasing the size times .5 until it was close as it can get to the width you wanted, problem with this was it was slow. In either case neither actually resized the image just defined a new size. I took an hour did some reasearch at php.net, and found basic information to make this code.
    // By: Karl Blessing
    //
    //
    // Inputs:Edit the $picsize to give desired width of each thumbnail.
    also passing img_name with the path and filename of the image you want to resize.
    for example gd.php?img_name=zoom.jpg
    //
    // Returns:The code will cause it to send Jpeg data back to the browser resized, allowing you to send a few kilobytes rather than 300K or so if you just told HTML how big you wanted to shrink it.
    //
    //Assumes:I wrote this using PHP 4.1.2 Win32 binaries, which includes an extension called php_gd.dll in the extension folder, you can enable this in your php.ini, if your PHP does not have this you may be able to obtain this dll at php4win.com, otherwise you will have to recompile your PHP binaries from the source with the GD libraries.
    //
    //Side Effects:none that I am aware of. because you define width only, if your images are a wide range of different heights they may look odd next to each other in a thumbnail listing.
    //This code is copyrighted and has limited warranties.
    //Please see http://www.Planet-Source-Code.com/xq/ASP/txtCodeId.570/lngWId.8/qx/vb/scripts/ShowCode.htm
    //for details.
    //**************************************
    
    <?
    /* Informs the browser the data being sent back is a Jpeg Image */
    Header ("Content-type: image/jpeg");
    /* loads image passed thru script
    ie: gd.php?img_name=zoom.jpg */
    $src_img = imagecreatefromjpeg($img_name);
    /* desired width of the thumbnail */
    $picsize = 123; 
    /* grabs the height and width */
    $new_w = imagesx($src_img);
    $new_h = imagesy($src_img);
    /* calculates aspect ratio */
    $aspect_ratio = $new_h / $new_w;
    /* sets new size */
    $new_w = $picsize;
    $new_h = abs($new_w * $aspect_ratio);
    /* creates new image of that size */
    $dst_img = imagecreate($new_w,$new_h);
    /* copies resized portion of original image into new image */
    imagecopyresized($dst_img,$src_img,0,0,0,0,$new_w,$new_h,imagesx($src_img),imagesy($src_img));
    /* return jpeg data back to browser */
    imagejpeg($dst_img);
    ?>
		

